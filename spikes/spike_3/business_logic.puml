@startuml spike_3_business_logic

title Spike 3: Edge Anchoring and Routing Logic

skinparam BoxPadding 10

package "manim_devops.routing" {
    
    class EdgeRouter {
        + float corner_radius
        __
        + __init__(corner_radius: float = 0.2)
        + compute_path(source_center: list, target_center: list, source_radius: float, target_radius: float) : list
        - _calculate_orthogonal_path(start: list, end: list) : list
    }

    class DevopsLine {
        + SVGMobject source_mobject
        + SVGMobject target_mobject
        + list waypoints
        __
        + __init__(source: SVGMobject, target: SVGMobject)
        + render() : VMobject
    }

}

note right of manim_devops.routing.EdgeRouter::compute_path
  1. Takes the center coordinates of two nodes.
  2. Calculates points on the edge of the nodes based on radii.
  3. Returns a list of coordinates representing the path.
end note

note right of manim_devops.routing.EdgeRouter::_calculate_orthogonal_path
  Internal method that creates a 90-degree 
  Manhattan/orthogonal routing path between
  two points instead of a direct diagonal line.
end note

note right of manim_devops.routing.DevopsLine::render
  Uses EdgeRouter to get the waypoints.
  Draws a Manim path (VMobject) using those waypoints.
end note

manim_devops.routing.EdgeRouter <.. manim_devops.routing.DevopsLine : consumes

@enduml
